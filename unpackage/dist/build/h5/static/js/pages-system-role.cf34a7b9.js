(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-role"],{1846:function(e,t,n){"use strict";n.r(t);var a=n("fa07"),r=n("5f59");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i,s=n("f0c5"),u=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,"235c0ae0",null,!1,a["a"],i);t["default"]=u.exports},"5f59":function(e,t,n){"use strict";n.r(t);var a=n("835b"),r=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},6250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tree=t.remove=t.update=t.add=t.getList=void 0;var a=n("388b"),r=function(e){return(0,a.request)("system/role/list",e)};t.getList=r;var o=function(e){return(0,a.request)("system/role/add",e)};t.add=o;var i=function(e){return(0,a.request)("system/role/update",e)};t.update=i;var s=function(e){return(0,a.request)("system/role/remove",e)};t.remove=s;var u=function(e){return(0,a.request)("system/role/tree",e)};t.tree=u},"835b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=n("8c45"),o=n("6250"),i={data:function(){return{loading:!1,form:{},params:{},option:{height:"auto",calcHeight:80,searchShow:!0,searchMenuSpan:6,rowKey:"_id",tip:!1,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,column:[{label:"角色名",prop:"role_name",search:!0,width:150,span:12,rules:[{required:!0,message:"请输入角色名",trigger:"blur"}]},{label:"所属门店",prop:"tenantId",type:"tree",span:12,dicData:[],props:{label:"name",value:"_id"},search:!0,rules:[{required:!0,message:"请输入所属租户",trigger:"change"}]},{label:"上级角色",prop:"parent_id",span:12,type:"tree",dicData:[],props:{label:"role_name",value:"_id"},rules:[{required:!0,message:"请选择上级角色",trigger:"change"}]},{label:"门店管理员",prop:"type",span:12,type:"select",value:2,dicData:[{label:"是",value:1},{label:"否",value:2}],rules:[{required:!0,message:"请选择是否是门店管理员",trigger:"change"}]},{label:"备注",prop:"comment",span:12,rules:[{required:!1,message:"请输入备注",trigger:"change"}]},{label:"创建时间",prop:"created_date",span:12,display:!1}]},data:[]}},created:function(){a=this,(0,r.tree)().then((function(e){var t=a.findObject(a.option.column,"tenantId");t.dicData=e}))},watch:{"form.tenantId":{handler:function(e){e&&(0,o.tree)({tenantId:e}).then((function(e){var t=a.findObject(a.option.column,"parent_id");t.dicData=e}))},deep:!0}},methods:{rowDel:function(e){var t=this;e.children&&e.children.length?this.$message({message:"请先删除子菜单！",type:"warning"}):this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,o.remove)({_ids:[e._id]}).then((function(e){t.$message({message:"删除成功",type:"success"}),t.loadData()}))}))},rowUpdate:function(e,t,n,a){var r=this;(0,o.update)(e).then((function(){r.loadData(),r.$message({message:"修改成功",type:"success"}),n()})).catch((function(e){n()}))},rowSave:function(e,t,n){var a=this;(0,o.add)(e).then((function(){a.loadData(),a.$message({message:"新增成功",type:"success"}),t()})).catch((function(e){t()}))},searchReset:function(){this.params={},this.loadData()},searchChange:function(e,t){this.params=e,this.loadData(),t()},selectionChange:function(){},loadData:function(){var e=this;this.loading=!0,(0,o.tree)(this.params).then((function(t){e.loading=!1,e.data=t})).catch((function(){e.loading=!1}))}}};t.default=i},"8c45":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tree=t.remove=t.update=t.add=t.getList=void 0;var a=n("388b"),r=function(e){return(0,a.request)("system/tenant/list",e)};t.getList=r;var o=function(e){return(0,a.request)("system/tenant/add",e)};t.add=o;var i=function(e){return(0,a.request)("system/tenant/update",e)};t.update=i;var s=function(e){return(0,a.request)("system/tenant/remove",e)};t.remove=s;var u=function(e){return(0,a.request)("system/tenant/tree",e)};t.tree=u},fa07:function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-container"},[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"row-del":function(t){arguments[0]=t=e.$handleEvent(t),e.rowDel.apply(void 0,arguments)},"row-update":function(t){arguments[0]=t=e.$handleEvent(t),e.rowUpdate.apply(void 0,arguments)},"row-save":function(t){arguments[0]=t=e.$handleEvent(t),e.rowSave.apply(void 0,arguments)},"search-change":function(t){arguments[0]=t=e.$handleEvent(t),e.searchChange.apply(void 0,arguments)},"search-reset":function(t){arguments[0]=t=e.$handleEvent(t),e.searchReset.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)},"on-load":function(t){arguments[0]=t=e.$handleEvent(t),e.loadData.apply(void 0,arguments)}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},o=[]}}]);