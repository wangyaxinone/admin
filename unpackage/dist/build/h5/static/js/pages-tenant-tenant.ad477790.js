(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tenant-tenant"],{"568f":function(e,t,a){"use strict";var n=a("4ea4");a("caad"),a("d81d"),a("4e82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=a("8c45"),o=n(a("95b5")),s={components:{uniDateformate:o.default},data:function(){return{loading:!1,map:{formattedAddress:"",longitude:0,latitude:0},form:{},params:{},option:{height:"auto",calcHeight:80,searchShow:!0,searchMenuSpan:6,rowKey:"_id",tip:!1,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,column:[{label:"门店名称",prop:"name",search:!0,width:150,span:12,rules:[{required:!0,message:"请输入门店名称",trigger:"blur"}]},{label:"上级门店",prop:"parent_id",span:12,type:"tree",dicData:[],props:{label:"name",value:"_id"}},{label:"门店类型",prop:"type",span:12,type:"select",value:1,dicData:[{label:"自营",value:1},{label:"加盟",value:2}]},{label:"门店状态",prop:"enable",type:"switch",span:12,value:!0,dicData:[{label:"禁用",value:!1},{label:"启用",value:!0}]},{label:"门店地址",prop:"address",formslot:!0,width:250,span:12,rules:[{required:!0,message:"请输入门店名称",trigger:"blur"}]},{label:"创建时间",prop:"create_date",slot:!0,width:140,span:12,display:!1}]},data:[]}},created:function(){r=this},watch:{map:function(e){this.form.address=e.formattedAddress,this.form.longitude=e.longitude,this.form.latitude=e.latitude}},methods:{beforeOpen:function(e,t){["view","edit"].includes(t)?this.map={formattedAddress:this.form.address,longitude:this.form.longitude,latitude:this.form.latitude}:this.map={formattedAddress:"",longitude:0,latitude:0},e()},rowDel:function(e){var t=this;e.children&&e.children.length?this.$message({message:"请先删除子菜单！",type:"warning"}):this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){(0,i.remove)({_ids:[e._id]}).then((function(e){t.$message({message:"删除成功",type:"success"}),t.loadData()}))}))},rowUpdate:function(e,t,a,n){var r=this;(0,i.update)(e).then((function(){r.loadData(),r.$message({message:"修改成功",type:"success"}),a()})).catch((function(e){a()}))},rowSave:function(e,t,a){var n=this;(0,i.add)(e).then((function(){n.loadData(),n.$message({message:"新增成功",type:"success"}),t()})).catch((function(e){t()}))},searchReset:function(){this.params={},this.loadData()},searchChange:function(e,t){this.params=e,this.loadData(),t()},selectionChange:function(){},loadData:function(){var e=this;this.loading=!0,(0,i.getList)(this.params).then((function(t){t.sort((function(e,t){return e.sort>t.sort?1:-1}));var a=r.$getTree(t,{id:"_id",children:"children",parentId:"parent_id"}),n=r.findObject(r.option.column,"parent_id");n.dicData=a,e.data=a,e.loading=!1})).catch((function(){e.loading=!1}))}}};t.default=s},"74c2":function(e,t,a){"use strict";a.r(t);var n=a("568f"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"7b04":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-text",[e._v(e._s(e.dateShow))])},i=[]},"8c45":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tree=t.remove=t.update=t.add=t.getList=void 0;var n=a("388b"),r=function(e){return(0,n.request)("system/tenant/list",e)};t.getList=r;var i=function(e){return(0,n.request)("system/tenant/add",e)};t.add=i;var o=function(e){return(0,n.request)("system/tenant/update",e)};t.update=o;var s=function(e){return(0,n.request)("system/tenant/remove",e)};t.remove=s;var u=function(e){return(0,n.request)("system/tenant/tree",e)};t.tree=u},"95b5":function(e,t,a){"use strict";a.r(t);var n=a("7b04"),r=a("a6a3");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);var o,s=a("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"808c1684",null,!1,n["a"],o);t["default"]=u.exports},a552:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-container"},[a("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,"before-open":e.beforeOpen},on:{"row-del":function(t){arguments[0]=t=e.$handleEvent(t),e.rowDel.apply(void 0,arguments)},"row-update":function(t){arguments[0]=t=e.$handleEvent(t),e.rowUpdate.apply(void 0,arguments)},"row-save":function(t){arguments[0]=t=e.$handleEvent(t),e.rowSave.apply(void 0,arguments)},"search-change":function(t){arguments[0]=t=e.$handleEvent(t),e.searchChange.apply(void 0,arguments)},"search-reset":function(t){arguments[0]=t=e.$handleEvent(t),e.searchReset.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)},"on-load":function(t){arguments[0]=t=e.$handleEvent(t),e.loadData.apply(void 0,arguments)}},scopedSlots:e._u([{key:"addressForm",fn:function(t){return[a("avue-map",{model:{value:e.map,callback:function(t){e.map=t},expression:"map"}})]}},{key:"create_date",fn:function(e){return[a("uniDateformate",{attrs:{date:e.row.create_date}})]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[]},a6a3:function(e,t,a){"use strict";a.r(t);var n=a("a86a"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},a86a:function(e,t,a){"use strict";a("a9e3"),a("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("9ccf"),r={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return Date.now()}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,n.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var e=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){e.refresh()}),parseInt(this.refreshRate)))}}};t.default=r},bf55:function(e,t,a){"use strict";a.r(t);var n=a("a552"),r=a("74c2");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);var o,s=a("f0c5"),u=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"6087ff98",null,!1,n["a"],o);t["default"]=u.exports}}]);